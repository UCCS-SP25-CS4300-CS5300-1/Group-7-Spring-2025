# Group-7-Spring-2025
## Setup, Startup and Accessing
### Local Manual 
#### Setup
1. Navigate to the root of the project.
2. Make a venv: `python3 -m venv myenv`
3. Load the venv
   - Windows(Powershell): `.\myenv\bin\activate`
   - Linux/Mac: `source myenv/bin/activate`
4. Install the requirements: `pip install -r requirements.txt`
5. Generate a secret django key: `python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"`
6. Run a django migration: `python3 manage.py migrate`
7. Export these environment variables to your local machine
   - Windows(Powershell)
      - `$env:PROD = "false"`
      - `$env:DJANGO_SECRET_KEY = "<your secret key>"`
      - `$env:OPENAI_API_KEY = "<your api key>"`
   - Linux/Mac
      - `export PROD=false`
      - `export DANGO_SECRET_KEY='<your secret key>'` (make sure to surround the key itself in apostraphes)
      - `export OPENAI_API_KEY=<your api key>`

#### Startup
1. Navigate to the root of the project.
2. <ins>(if you recently ran the clean-startup script)</ins> Repeat the manual setup steps 2-5 to set up the venv after it was erased
3. Load the venv
   - Windows(Powershell): `.\myenv\bin\activate`
   - Linux/Mac: `source myenv/bin/activate`
4. Navigate to the active_interview_backend/ folder
5. <ins>(if you changed a static file like **CSS** or **images**)</ins> Delete the folder active_interview_backend/staticfiles/: `rm -Rf staticfiles`
6. Run the server manually: `python3 manage.py runserver`


#### Registering Accounts
In order to allow people to register accounts from the page, permission levels must be set.
1. Activate your virtual environement
2. use the command 'python manage.py createsuperuser' to create an admin
3. launch the django project
4. Access through the means of the wep page or any other access point into the admin site 'http://127.0.0.1:8000/admin'
5. Go to groups
6. Add group called average_role and select permission levels
7. save the group
Now you should be able to register accounts on the page.



#### Accessing
`http://127.0.0.1:8000`

### Local Docker-Compose
#### Setup
1. Navigate to the root of the project.
2. Make a venv: `python3 -m venv myenv`
3. Load the venv: `source myenv/bin/activate`
4. Install the requirements: `pip install -r requirements.txt`
5. Generate a secret django key: `python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"`
6. Make an OpenAI API key.
6. Edit open a `.env` file in the root of your project and fill it out like so:
```
DJANGO_SECRET_KEY=<your secret key>
OPENAI_API_KEY=<your api key>
```

#### Startup
1. Navigate to the root of the project.
2. Run `docker-compose up -d --build`.  Same a production environment for now.

#### Accessing
`http://127.0.0.1`

## Debugging
### Network Issues
#### Arch Linux(And Derivatives)
Please follow [the last post on this forum thread](https://bbs.archlinux.org/viewtopic.php?pid=2025168#p2025168) to fix your local docker's networking issues.

## Cleaning
Every once in a while, your local environment may break because of a refactor, but the code works just fine in production.  Here is a way to clean your local environment on linux/mac:
1. Navigate to the root of the project.
2. `docker-compose down --volumes --remove-orphans`
3. `docker system prune --all --volumes`
4. `sudo systemctl restart docker`
5. `git clean -fdx -e .env -e db`

## Restarting Cleanly
I have created an linux/mac script that should make cleanly restarting local deployments in a way that avoids bugs much easier.  If you run windows, look at scripts/clean-restart.sh and do the equivalent commands for windows.
> [!CAUTION]
> Make sure to commit your code before using this.  The script can and will wipe all non-committed code, so you will lose work if you forget.
1. Navigate to the root of the project.
2. `sudo ./scripts/clean-restart.sh`

## AI Use
1. The git diff script in CI.yml was iteratively designed with the help of chatgpt.
2. The check_coverage.sh script was generated by chatgpt, although minor modifications have been made: https://chatgpt.com/share/67cf5f81-5500-8006-894a-7f8403fcc0f
3. The chatbox image on the homepage was generated by chatgpt.
4. The E2E authentication script is adapted from a ChatGPT response
5. The chrome and chromedriver install scripts in CI.yml are adapted from ChatGPT responses
6. The jQuery/Ajax script in chat-view.html is adapted from a ChatGPT response
7. ChatGPT was used to rewrite system prompts for greater clarity
8. The chat creation button hiding script was adapted from a ChatGPT response.

## Technologies
1. Django
2. Nginx
3. Gunicorn
4. ChatGPT
5. Bootstrap 5
6. Docker-Compose
7. Digital Ocean
8. Ajax
9. jQuery
10. DOMPurify
11. pymupdf
